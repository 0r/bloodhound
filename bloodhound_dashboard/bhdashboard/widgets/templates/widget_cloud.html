
<div id="content" class="${'well' if view == 'cloud' else None}"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude">

  <py:def function="display_value(value)">
    <py:choose test="value">
      <py:when test="None">
        <span class="label">empty</span>
      </py:when>
      <py:when test="''">
        <span class="label">empty</span>
      </py:when>
      <py:otherwise>${value}</py:otherwise>
    </py:choose>
  </py:def>

  <h3 style="display: inline;">$heading</h3>
  <p style="font-size: medium; line-height: 150%;">
    <py:choose test="view">
      <py:when test="'cloud'">
        <py:for each="item in items"
            py:with="_max = bounds.max + 1; _min = bounds.min" >
          <py:if test="item[1] &gt; 0">
            <a href="${item_link(item)}"
                style="font-size: ${int(28 - (13 / (_max - _min)) * (_max - item[1] - 1) )}px">
              ${display_value(item[0])}
              <py:if test="verbose">(${item[1]})</py:if>
            </a>
            &nbsp;&nbsp;
          </py:if>
        </py:for>
      </py:when>
      <py:when test="'list'">
        <ul>
          <li py:for="item in items" py:if="item[1] &gt; 0">
            <a href="${item_link(item)}">
              ${display_value(item[0])}
              <py:if test="verbose">(${item[1]})</py:if>
            </a>
          </li>
        </ul>
      </py:when>
      <py:when test="'table'">
        <table class="table table-striped table-condensed">
          <thead>
            <tr>
              <th class="full-x">&nbsp;</th>
              <th py:if="verbose">Qty</th>
            </tr>
          </thead>
          <tbody>
            <tr py:for="item in items" py:if="item[1] &gt; 0">
              <td>
                <a href="${item_link(item)}">${display_value(item[0])}</a>
              </td>
              <td py:if="verbose">${item[1]}</td>
            </tr>
          </tbody>
        </table>
      </py:when>
      <py:when test="'compact'">
        <div class="span2" py:for="item in items" py:if="item[0] &gt; 0">
          <a href="${item_link(item)}">
            ${display_value(item[0])}
            <py:if test="verbose">(${item[1]})</py:if>
          </a>
        </div>
      </py:when>
      <py:otherwise>
        <!--! TODO: Error message: Invalid widget view -->
      </py:otherwise>
    </py:choose>
  </p>
</div>
